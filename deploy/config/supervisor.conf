# Supervisor configuration for U-Cup Tournament Laravel queues
# Place this file in /etc/supervisor/conf.d/u-cup-tournament.conf

[program:u-cup-tournament-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /home/ubuntu/u-cup-tournament/artisan queue:work --sleep=3 --tries=3 --max-time=3600
autostart=true
autorestart=true
user=ubuntu
numprocs=2
redirect_stderr=true
stdout_logfile=/home/ubuntu/u-cup-tournament/storage/logs/worker.log
stopwaitsecs=3600

[program:u-cup-tournament-horizon]
process_name=%(program_name)s
command=php /home/ubuntu/u-cup-tournament/artisan horizon
autostart=true
autorestart=true
user=ubuntu
redirect_stderr=true
stdout_logfile=/home/ubuntu/u-cup-tournament/storage/logs/horizon.log
stopwaitsecs=3600

[program:u-cup-tournament-schedule]
process_name=%(program_name)s
command=php /home/ubuntu/u-cup-tournament/artisan schedule:run --verbose --no-interaction
autostart=true
autorestart=true
user=ubuntu
redirect_stderr=true
stdout_logfile=/home/ubuntu/u-cup-tournament/storage/logs/schedule.log
stopwaitsecs=3600